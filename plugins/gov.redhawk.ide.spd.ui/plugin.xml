<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<!--
	This file is protected by Copyright. Please refer to the COPYRIGHT file distributed with this 
	source distribution.

	This file is part of REDHAWK IDE.
	
	All rights reserved.  This program and the accompanying materials are made available under 
	the terms of the Eclipse Public License v1.0 which accompanies this distribution, and is available at 
	http://www.eclipse.org/legal/epl-v10.html
-->
<plugin>
   <extension
         point="org.eclipse.ui.newWizards">
      <wizard
            canFinishEarly="false"
            category="gov.redhawk.ide.ui.wizards.category.sca"
            class="gov.redhawk.ide.spd.ui.wizard.NewScaResourceProjectWizard"
            descriptionImage="icons/etool16/newprj_wiz.gif"
            hasPages="true"
            icon="icons/etool16/newprj_wiz.gif"
            id="gov.redhawk.ide.ui.wizards.newcomponent"
            name="%wizard.name"
            project="true">
      </wizard>
      <primaryWizard
            id="gov.redhawk.ide.ui.wizards.newcomponent">
      </primaryWizard>
   </extension>
   <extension
         point="org.eclipse.ui.editors">
      <editor
            class="gov.redhawk.ide.spd.internal.ui.editor.ComponentEditor"
            contributorClass="gov.redhawk.ide.spd.internal.ui.editor.ComponentEditorActionBarContributor"
            default="true"
            icon="icons/obj16/SpdModelFile.gif"
            id="gov.redhawk.ide.ui.editors.ComponentEditor"
            name="%editor.name">
         <contentTypeBinding
               contentTypeId="mil.jpeojtrs.sca.spd.content-type">
         </contentTypeBinding>
      </editor>
   </extension>
   <extension
         point="org.eclipse.ui.ide.markerResolution">
      <markerResolutionGenerator
            class="gov.redhawk.ide.spd.internal.ui.MarkerResolutionGenerator">
      </markerResolutionGenerator>
   </extension>
    <extension
       point="gov.redhawk.sca.ui.scaContentTypes">
    <contentType
          id="gov.redhawk.ide.spd.contentType"
          name="SPD Content Type"
          priority="LOWEST">
       <describer
             class="gov.redhawk.sca.ui.editors.ScaObjectWrapperContentDescriber"
             plugin="gov.redhawk.sca.ui">
          <parameter
                name="profileFilename"
                value=".*spd.xml">
          </parameter>
       </describer>
    </contentType>
    <contentTypeBinding
          contentTypeId="gov.redhawk.ide.spd.contentType"
          editorId="gov.redhawk.ide.ui.editors.ComponentEditor"
          priority="LOWEST">
    </contentTypeBinding>
    <contentTypeBinding
          contentTypeId="mil.jpeojtrs.sca.spd.contentType"
          editorId="gov.redhawk.ide.ui.editors.ComponentEditor"
          priority="LOWEST">
    </contentTypeBinding>
 </extension>
   <extension
         point="org.eclipse.ui.commands">
      <command
            description="%command.description"
            id="gov.redhawk.ide.spd.ui.command.organizeinterfaces"
            name="%command.name">
      </command>
      <command
            description="%command.description.0"
            id="gov.redhawk.ide.spd.ui.command.removePorts"
            name="%command.name.0">
      </command>
      <command
            description="%command.description.1"
            id="gov.redhawk.ide.spd.ui.command.addPort"
            name="%command.name.1">
      </command>
      <command
            description="%command.description.3"
            id="gov.redhawk.ide.spd.ui.command.recreateSettings"
            name="%command.name.3">
      </command>
   </extension>
   <extension
         point="org.eclipse.ui.handlers">
      <handler
            class="gov.redhawk.ide.spd.internal.ui.handlers.OrganizeInterfacesHandler"
            commandId="gov.redhawk.ide.spd.ui.command.organizeinterfaces">
         <activeWhen>
            <iterate
                  ifEmpty="false">
               <or>
                  <adapt
                        type="org.eclipse.core.resources.IResource">
                     <test
                           property="org.eclipse.core.resources.name"
                           value="*.scd.xml">
                     </test>
                  </adapt>
                  <adapt
                        type="org.eclipse.core.resources.IResource">
                     <test
                           property="org.eclipse.core.resources.name"
                           value="*.spd.xml">
                     </test>
                  </adapt>
               </or>
            </iterate>
         </activeWhen>
      </handler>
      <handler
            class="gov.redhawk.ide.spd.internal.ui.handlers.RemovePortsHandler"
            commandId="gov.redhawk.ide.spd.ui.command.removePorts">
         <enabledWhen>
            <iterate
                  ifEmpty="false">
               <instanceof
                     value="org.eclipse.emf.edit.provider.IWrapperItemProvider">
               </instanceof>
            </iterate>
         </enabledWhen>
      </handler>
      <handler
            class="gov.redhawk.ide.spd.internal.ui.handlers.AddPortHandler"
            commandId="gov.redhawk.ide.spd.ui.command.addPort">
      </handler>
      <handler
            class="gov.redhawk.ide.spd.internal.ui.handlers.RecreateSettingsHandler"
            commandId="gov.redhawk.ide.spd.ui.command.recreateSettings">
         <activeWhen>
            <iterate
                  ifEmpty="false">
               <adapt
                     type="org.eclipse.core.resources.IResource">
                  <test
                        property="org.eclipse.core.resources.name"
                        value="*.spd.xml">
                  </test>
               </adapt>
            </iterate>
         </activeWhen>
      </handler>
   </extension>
   <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            locationURI="menu:project?after=additions">
         <command
               commandId="gov.redhawk.ide.codegen.ui.command.generatecomponent"
               icon="icons/generate_code.gif"
               style="push">
            <visibleWhen
                  checkEnabled="true">
               <with
                     variable="activeEditor">
                  <instanceof
                        value="gov.redhawk.ide.spd.internal.ui.editor.ComponentEditor">
                  </instanceof>
               </with>
            </visibleWhen>
         </command>
      </menuContribution>
      <menuContribution
            locationURI="popup:org.eclipse.ui.popup.any?after=additions">
         <command
               commandId="gov.redhawk.ide.codegen.ui.command.generatecomponent"
               icon="icons/generate_code.gif"
               style="push">
            <visibleWhen
                  checkEnabled="false">
                  <iterate
                     ifEmpty="false"
                     operator="and">
                  <or>
                     <adapt
                           type="org.eclipse.core.resources.IResource">
                        <test
                              property="org.eclipse.core.resources.name"
                              value="*.spd.xml">
                        </test>
                     </adapt>
                     <instanceof
                           value="mil.jpeojtrs.sca.spd.Implementation">
                     </instanceof>
                  </or>
               </iterate>
            </visibleWhen>
         </command>
      </menuContribution>
      <menuContribution
            locationURI="popup:org.eclipse.ui.popup.any?after=additions">
         <command
               commandId="gov.redhawk.ide.spd.ui.command.organizeinterfaces"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <iterate
                     ifEmpty="false">
	               <or>
	                 <adapt
	                       type="org.eclipse.core.resources.IResource">
	                    <test
	                          property="org.eclipse.core.resources.name"
	                          value="*.spd.xml">
	                    </test>
	                 </adapt>
	                 <adapt
	                       type="org.eclipse.core.resources.IResource">
	                    <test
	                          property="org.eclipse.core.resources.name"
	                          value="*.scd.xml">
	                    </test>
	                 </adapt>
                 </or>
               </iterate>
            </visibleWhen>
         </command>
         <command
               commandId="gov.redhawk.ide.spd.ui.command.recreateSettings"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <iterate
                     ifEmpty="false">
                  <adapt
                        type="org.eclipse.core.resources.IResource">
                     <test
                           property="org.eclipse.core.resources.name"
                           value="*.spd.xml">
                     </test>
                  </adapt>
               </iterate>
            </visibleWhen>
         </command>
      </menuContribution>
   </extension>
    <extension
          point="org.eclipse.core.runtime.preferences">
       <initializer
             class="gov.redhawk.ide.spd.ui.ComponentUiPreferenceInitializer">
       </initializer>
    </extension>
    <extension
          point="org.eclipse.ui.decorators">
       <decorator
             class="gov.redhawk.ide.spd.internal.ui.editor.provider.PrimaryImplementationDecorator"
             id="gov.redhawk.ide.spd.ui.editor.provider.PrimaryImplementationDecorator"
             label="%decorator.label"
             lightweight="true"
             state="true">
          <enablement>
             <objectClass
                   name="mil.jpeojtrs.sca.spd.Implementation">
             </objectClass>
          </enablement>
       </decorator>
    </extension>
    <extension
          point="org.eclipse.ui.bindings">
       <key
             commandId="gov.redhawk.ide.spd.ui.command.removePorts"
             contextId="gov.redhawk.ide.spd.ui.ports.context"
             schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
             sequence="DEL">
       </key>
    </extension>
    <extension
          point="org.eclipse.ui.contexts">
       <context
             description="used to override existing eclipse keybindings"
             id="gov.redhawk.ide.spd.ui.ports.context"
             name="Ports tab context"
             parentId="org.eclipse.ui.contexts.window">
       </context>
    </extension>
</plugin>
